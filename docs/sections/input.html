<h1 id="input">Input</h1>

<p>SpinVibe requires several inputs from other codes and parameters to perform spin-phonon coupling simulations. 
    All input files are required to be formated in HDF5 format for universal compatibility.</p>


<h2>Required Input Files</h2>

<h3>1. Molecular spin hamiltonian calculation Output</h3>
    <div class="input-file">
        <div class="file-header">
            <span class="filename">spin.h5</span>
            <span class="file-format">HDF5 Format</span>
        </div>
        <p>Contains unperturbed g-tensor and zero-field splitting (D) tensor from quantum chemistry calculations.</p>
        
        <h4>Required Datasets:</h4>
        <ul>
            <li><code>/g_tensor</code> - 3×3 g-tensor matrix</li>
            <li><code>/d_tensor</code> - 3×3 zero-field splitting tensor</li>
        </ul>
        
        <div class="code-example">
            <div class="code-header">Example Structure</div>
            <pre><code class="python">with h5py.File('spin.h5', 'r') as f:
                g_tensor = f['g_tensor'][:]      
                d_tensor = f['d_tensor'][:]      
            </code></pre>
        </div>
    </div>

<h3>2. Phonon Data</h3>
<div class="input-file">
    <div class="file-header">
        <span class="filename">phonon.h5</span>
        <span class="file-format">HDF5 Format</span>
    </div>
    <p>Contains phonon frequencies and eigenvectors from solid-state calculations.</p>
    
    <h4>Required Datasets:</h4>
    <ul>
        <li><code>/frequencies</code> - Phonon frequencies in cm⁻¹</li>
        <li><code>/eigenvectors</code> - Phonon eigenvectors</li>
        <li><code>/q_points</code> - Q-points in reciprocal space</li>
    </ul>
    
    <div class="code-example">
        <div class="code-header">Example Structure</div>
        <pre><code class="python">with h5py.File('phonon.h5', 'r') as f:
            q_points = f['q_points'][1:, :]
            frequencies_cm = f['frequencies_cm'][1:, :]
            eigenvectors = f['eigenvectors'][1:, :]
        </code></pre>
    </div>
</div>

<h3>3. Tensor Derivatives</h3>

<div class="input-file">
    <div class="file-header">
        <span class="file-format">Numpy array</span>
    </div>
    <h4>Required Datasets:</h4>
    <ul>
        <li><code>disp1</code> - Atomic displacements for the first derivative
        <p><strong>Type:</strong> numpy array<br></li>
    </ul>
</div>

<div class="input-file">
    <div class="file-header">
        <span class="filename">d1.h5</span>
        <span class="file-format">HDF5 Format</span>
    </div>
    <p>First derivatives of g and D tensors with respect to atomic displacements.</p>

    <h4>Required Datasets:</h4>
    <ul>
        <li><code>/D_d1</code> - First derivatives of D-tensor</li>
        <li><code>/G_d1</code> - First derivatives of g-tensor</li>
    </ul>
    
    <div class="code-example">
        <div class="code-header">Example Structure</div>
        <pre><code class="python">with h5py.File(d1.h5, 'r') as f:
            D_d1 = f['d_tensor'][:]
            G_d1 = f['g_matrix'][:]
        </code></pre>
    </div>
</div>

<div class="input-file">
    <div class="file-header">
        <span class="file-format">Numpy array</span>
    </div>
    <h4>Required Datasets:</h4>
    <ul>
        <li><code>disp2</code> - Atomic displacements for the second derivative
        <p><strong>Type:</strong> numpy array<br></li>
    </ul>
</div>
<div class="input-file">
    <div class="file-header">
        <span class="filename">d2.h5, g2.h5</span>
        <span class="file-format">HDF5 Format</span>
    </div>
    <p>Second derivatives of D and g tensors</p>

    <h4>Required Datasets:</h4>
    <ul>
        <li><code>/D_d2</code> - Second derivatives of D-tensor</li>
        <li><code>/G_d2</code> - Second derivatives of g-tensor</li>
    </ul>
    
    <div class="code-example">
        <div class="code-header">Example Structure</div>
        <pre><code class="python">with h5py.File(d2.h5, 'r') as f:
            D_d2 = f['d_tensor'][:]
        </code></pre>
        <pre><code class="python">with h5py.File(g2.h5, 'r') as f:
            G_d2 = f['g_tensor'][:]
        </code></pre>
    </div>
</div>

<h3>4. Structural Information</h3>

<div class="input-file">
    <div class="file-header">
        <span class="filename">atoms.h5</span>
        <span class="file-format">HDF5 Format</span>
    </div>
    <p>Contains atomic positions and crystal structure information.</p>

    <h4>Required Datasets:</h4>
    <ul>
        <li><code>/R_vectors</code> - Atomic coordinates in Å</li>
        <li><code>/reciprocal_vectors</code> - Reciprocal lattice vectors</li>
    </ul>
    
    <div class="code-example">
        <div class="code-header">Example Structure</div>
        <pre><code class="python">with h5py.File(self.atoms_file, 'r') as f:
            R_vectors = f['positions'][:]
            reciprocal_vectors = f['reciprocal_vectors'][:]
        </code></pre>

    </div>
</div>

<div class="input-file">
    <div class="file-header">
        <span class="filename">molecule_indices.h5</span>
        <span class="file-format">HDF5 Format</span>
    </div>
    <p>Indices of atoms belonging to the molecular qubit within the crystal.</p>
    
    <h4>Required Datasets:</h4>
    <ul>
        <li><code>/indices</code> - Atom indices in the molecule</li>
    </ul>
    <div class="code-example">
        <div class="code-header">Example Structure</div>
        <pre><code class="python">with h5py.File(molecule_indices.h5, 'r') as f:
            indices = f['indices'][:]
        </code></pre>

    </div>
</div>

<div class="input-file">
    <div class="file-header">
        <span class="filename">mol_mass.h5</span>
        <span class="file-format">HDF5 Format</span>
    </div>
    <p>Atomic masses of the molecule.</p>
    
    <h4>Required Datasets:</h4>
    <ul>
        <li><code>/masses</code> - Masses of atoms in atomic units</li>

    </ul>
    <div class="code-example">
        <div class="code-header">Example Structure</div>
        <pre><code class="python">with h5py.File(mol_mass.h5, 'r') as f:
            masses = f['atomic_masses'][:]
        </code></pre>


    </div>
</div>

<hr>

<h2>Simulation Parameters</h2>
    
    <div class="parameter">
        <h4>B = Magnetic Field</h4>
        <p><strong>Type:</strong> numpy array<br>
           <strong>Format:</strong> <code>[Bx, By, Bz]</code> in Tesla<br>
           <strong>Example:</strong> <code>np.array([0.0, 0.0, 0.410])</code><br>
           <strong>Description:</strong> External magnetic field vector applied to the system.</p>
    </div>
    
    <div class="parameter">
        <h4>S = Spin Quantum Number</h4>
        <p><strong>Type:</strong> integer or half-integer<br>
           <strong>Example:</strong> <code>1</code> (for S=1 system)<br>
           <strong>Description:</strong> Total spin quantum number of the molecular qubit.</p>
    </div>
    
    <div class="parameter">
        <h4>T = Temperature</h4>
        <p><strong>Type:</strong> float<br>
           <strong>Unit:</strong> Kelvin<br>
           <strong>Example:</strong> <code>5.0</code><br>
           <strong>Description:</strong> Simulation temperature.</p>
    </div>
    
    <div class="parameter">
        <h4>Delta_alpha_q = Phonon Broadening Parameter</h4>
        <p><strong>Type:</strong> float<br>
           <strong>Unit:</strong> cm⁻¹<br>
           <strong>Example:</strong> <code>1</code><br>
           <strong>Description:</strong> Phonon linewidth broadening parameter.</p>
    </div>

    <div class="parameter">
        <h4>Ncells = Number of Unit Cells (Ncells)</h4>
        <p><strong>Type:</strong> integer<br>
           <strong>Example:</strong> <code>50</code><br>
           <strong>Description:</strong> Number of unit cells to include in supercell calculation.</p>
    </div>

    <div class="parameter">
        <h4>init_type = Initial State Type</h4>
        <p><strong>Type:</strong> string<br>
           <strong>Options:</strong> <code>'pure'</code>, <code>'polarized'</code>, <code>'boltzmann'</code><br>
           <strong>Default:</strong> <code>'pure'</code><br>
           <strong>Description:</strong> Method for initializing the spin density matrix.</p>
    </div>
    
    <div class="parameter">
        <h4>pol = Polarization Vector</h4>
        <p><strong>Type:</strong> numpy array<br>
           <strong>Format:</strong> <code>[px, py, pz]</code><br>
           <strong>Example:</strong> <code>np.array([0, 0, 1])</code><br>
           <strong>Description:</strong> Initial spin polarization direction and final and magnetization measurement vector.</p>
    </div>

    <div class="parameter">
        <h4>R_type = Redfield order</h4>
        <p><strong>Type:</strong>  string<br>
           <strong>Options:</strong> <code>'R1'</code>, <code>'R2'</code>, <code>'both'</code><br>
           <strong>Default:</strong> <code>'both'</code><br>
           <strong>Description:</strong> Define the order of the Redfield operator to be computed (R1=linear coupling, R2=quadratic coupling).</p>
    </div>

    <div class="parameter">
        <h4>rot_mat = Rotation Matrix</h4>
        <p><strong>Type:</strong> 3×3 numpy array<br>
           <strong>Example:</strong> <code>np.array([[0,0,1], [1,0,0], [0,1,0]])</code><br>
           <strong>Description:</strong> Matrix to align molecular frame with crystal frame.</p>
    </div>

    <div class="parameter">
        <h4>tf = Total Time</h4>
        <p><strong>Type:</strong> float<br>
           <strong>Unit:</strong> seconds<br>
           <strong>Example:</strong> <code>1E-3</code> (1 millisecond)<br>
           <strong>Description:</strong> Total simulation time.</p>
    </div>
    
    <div class="parameter">
        <h4>dt = Time Step</h4>
        <p><strong>Type:</strong> float<br>
           <strong>Unit:</strong> seconds<br>
           <strong>Example:</strong> <code>1E-6</code> (1 microsecond)<br>
           <strong>Description:</strong> Time step for numerical integration.</p>
    </div>
    
    <div class="parameter">
        <h4>save_file = Filename</h4>
        <p><strong>Type:</strong>  string<br>
           <strong>Default:</strong> <code>'both'</code><br>
           <strong>Description:</strong> Define the name of the file to store the time evolution.</p>
    </div>
</div>
<hr>

<style>
.input-file {
    background: #f8f9fa;
    border: 1px solid #e9ecef;
    border-radius: 5px;
    padding: 20px;
    margin: 15px 0;
}

.file-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
}

.filename {
    font-family: 'Courier New', monospace;
    font-weight: bold;
    color: #2c3e50;
}

.file-format {
    background: #2980b9;
    color: white;
    padding: 2px 8px;
    border-radius: 3px;
    font-size: 12px;
}

.parameter-section {
    margin: 25px 0;
}

.parameter-section h3 {
    color: #2c3e50;
    border-bottom: 2px solid #e1e4e5;
    padding-bottom: 8px;
    margin-bottom: 15px;
}

.parameter {
    background: white;
    border: 1px solid #e9ecef;
    border-radius: 5px;
    padding: 15px;
    margin: 10px 0;
}

.parameter h4 {
    margin: 0 0 10px 0;
    color: #2980b9;
    font-size: 1.1em;
}

.parameter p {
    margin: 5px 0;
}

.code-example {
    background: #f8f9fa;
    border: 1px solid #e1e4e5;
    border-radius: 5px;
    margin: 15px 0;
}

.code-header {
    background: #e9ecef;
    padding: 10px 15px;
    border-bottom: 1px solid #dee2e6;
    font-family: 'Courier New', monospace;
    font-weight: bold;
}

@media (max-width: 768px) {
    .file-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 5px;
    }
    
    .parameter {
        padding: 10px;
    }
}
</style>
